/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var u=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var b=(i,n)=>{for(var e in n)u(i,e,{get:n[e],enumerable:!0})},V=(i,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of D(n))!k.call(i,s)&&s!==e&&u(i,s,{get:()=>n[s],enumerable:!(t=A(n,s))||t.enumerable});return i};var M=i=>V(u({},"__esModule",{value:!0}),i);var $={};b($,{default:()=>g});module.exports=M($);var a=require("obsidian");async function S(i){try{let e=(await(0,a.requestUrl)({url:i,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}})).text;return new DOMParser().parseFromString(e,"text/html")}catch(n){throw console.error("Error fetching webpage:",n),new Error(`Failed to fetch webpage: ${n.message}`)}}async function T(i){let n=await S(i),e=[],t=n.getElementsByClassName("engthes");return Array.from(t).forEach(s=>{let l=s.children;Array.from(l).forEach(o=>{let y=o.children;Array.from(y).forEach(r=>{var f;(f=r.getAttribute("style"))!=null&&f.includes("text-decoration")||r.querySelectorAll(":scope > span").forEach(p=>{var h;let d=(h=p.textContent)==null?void 0:h.trim();d&&d!=="..."&&e.push(d)})})})}),[...new Set(e)].filter(Boolean)}async function O(i){let n=await S(i),e=new Map,t=n.querySelectorAll(".ant-col-xs-24 > .word--C9UPa");return Array.from(t).forEach(s=>{let l=s.querySelectorAll(":scope > * > * > *"),o="",y="";Array.from(l).forEach(r=>{var f,c;r.classList.contains("word__name--TTbAA")?o=(f=r.textContent)!=null?f:"":r.classList.contains("word__defination--2q7ZH")&&(y=(c=r.querySelectorAll(":scope > *")[0].textContent)!=null?c:"")}),e.set(o,y)}),e}var m="side-Information-View",g=class extends a.Plugin{async onload(){this.registerView(m,n=>new E(n)),this.addCommand({id:"Get-Synonyms",name:"Get Synonyms",editorCallback:async n=>{let e=n.getSelection();this.activateView(e)},hotkeys:[{modifiers:["Mod","Shift"],key:"Y"}]})}onunload(){this.app.workspace.detachLeavesOfType(m)}async activateView(n){let{workspace:e}=this.app,t=e.getLeavesOfType(m)[0];if(!t){let s=e.getRightLeaf(!1);if(s)await s.setViewState({type:m,active:!0}),t=e.getLeavesOfType(m)[0];else{console.log("No right leaf; Fallback");return}}t&&(t.view.updateContent(n||""),e.revealLeaf(t))}},E=class extends a.ItemView{constructor(e){super(e);this.header="";this.synonymsList=[];this.definition="";this.etymology=new Map}getViewType(){return m}getDisplayText(){return"Synonyms View"}async onOpen(){this.updateViewContent()}async updateContent(e){this.header=e;let[t,s,l]=await Promise.all([this.getSynonyms(e),this.getWordDefinition(e),O(`https://www.etymonline.com/word/${e}`)]);this.synonymsList=t,this.definition=s,this.etymology=l,this.updateViewContent()}async updateViewContent(){let e=this.containerEl.children[1];e.empty(),this.header&&e.createEl("h2",{text:`${w(this.header)}`});let s=e.createDiv({cls:"definition-container"}).createEl("details"),l=s.createEl("summary");if(s.setAttribute("open",""),await a.MarkdownRenderer.render(this.app,"#### Definitions",l,"",this),this.definition)for(let c of this.definition){let p=s.createEl("details",{cls:"definition-part"}),h=p.createEl("summary").createDiv();await a.MarkdownRenderer.render(this.app,`###### ${w(c.partOfSpeech)}`,h,"",this);let v=p.createDiv({cls:"definition-list"}),x=c.definitions.map((C,L)=>`${L+1}. ${C}`).join(`
`);await a.MarkdownRenderer.render(this.app,x,v,"",this)}let o=e.createEl("details"),y=o.createEl("summary");if(o.setAttribute("open",""),await a.MarkdownRenderer.render(this.app,"#### Synonyms",y,"",this),this.synonymsList.length>0){let c=o.createEl("ul");c.classList.add("SynonymList"),this.synonymsList.forEach(p=>{let d=c.createEl("li",{text:w(p)})})}else o.createEl("p",{text:"No synonyms found."});let r=e.createEl("details"),f=r.createEl("summary");if(r.setAttribute("open",""),await a.MarkdownRenderer.render(this.app,"#### Etymology",f,"",this),this.etymology.size>0)for(let[c,p]of this.etymology.entries()){let d=r.createDiv({cls:"etymology-part"});d.createEl("h6",{text:c}),d.createEl("p",{text:p})}else r.createEl("p",{text:"No etymology found for this word"})}async onClose(){}async getSynonyms(e){let t=[];return t=await T(`https://www.wordreference.com/synonyms/${e}`),t.length==0?(t=await(await fetch(`https://api.datamuse.com/words?rel_syn=${e}`)).json(),t.map(l=>l.word)):t}async getWordDefinition(e){try{let s=await(await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e}`)).json();return s.length>0?s[0].meanings.map(o=>({partOfSpeech:o.partOfSpeech,definitions:o.definitions.map(y=>y.definition)})):null}catch(t){return console.error("Error fetching definition:",t),null}}};function w(i){return i.length===0?i:i.charAt(0).toUpperCase()+i.slice(1)}
